version: 1
disable_existing_loggers: true # Important for testing
formatters:
    simple:
        format: '%(asctime)s %(levelname)s: %(message)s [%(module)s.py:%(lineno)s (%(threadName)s)]'
    detail:
        format: "%(asctime)s %(levelname)s  %(filename)s.%(funcName)s(): %(message)s (%(threadName)s)"
    timing:
        format: '%(asctime)s %(threadName)s %(levelname)s, %(filename)s.%(funcName)s() (line %(lineno)s): %(message)s'
    special:
        format: '%(asctime)s %(levelname)s: %(message)s [%(module)s.py:%(lineno)s (%(threadName)s/%(name)s)]'
handlers:
    console:
        class: logging.StreamHandler
        level: DEBUG
        formatter: simple
        stream: ext://sys.stdout
    console_special:
        class: logging.StreamHandler
        level: DEBUG
        formatter: special
        stream: ext://sys.stdout
    info_file:
        class: logging.handlers.RotatingFileHandler
        level: INFO
        formatter: simple
        filename: lazylibrarian-info.log
        maxBytes: 10485760 # 10MB
        backupCount: 5
        encoding: utf8
    debug_file:
        class: logging.handlers.RotatingFileHandler
        level: DEBUG
        formatter: detail
        filename: lazylibrarian-debug.log
        maxBytes: 10485760 # 10MB
        backupCount: 5
        encoding: utf
    debug_timing_file:
        class: logging.handlers.RotatingFileHandler
        level: DEBUG
        formatter: timing
        filename: lazylibrarian-debug.log
        maxBytes: 10485760 # 10MB
        backupCount: 5
        encoding: utf
    debug_special_file:
        class: logging.handlers.RotatingFileHandler
        level: DEBUG
        formatter: special
        filename: lazylibrarian-debug.log
        maxBytes: 10485760 # 10MB
        backupCount: 5
        encoding: utf
loggers:
    special:
        level: DEBUG
        handlers: [console_special, debug_special_file]
        propagate: true
    special.admin:
        level: INFO
    special.cache:
        level: INFO
    special.configread:
        level: INFO
    special.configwrite:
        level: INFO
    special.dbcomms:
        level: INFO
    special.dlcomms:
        level: INFO
    special.fileperms:
        level: INFO
    special.fuzz:
        level: INFO
    special.grsync:
        level: INFO
    special.iterateproviders:
        level: INFO
    special.libsync:
        level: INFO
    special.matching:
        level: INFO
    special.postprocess:
        level: INFO
    special.requests:
        level: INFO
    special.searching:
        level: INFO
    special.serverside:
        level: INFO
    cherrypy: # Don't log anything from CherryPy
        level: ERROR
        handlers: []
        propagate: false
    unittest:
        level: INFO
        handlers: [console]
root:
    level: INFO
    handlers: [console, info_file, debug_file]